{"ast":null,"code":"var _jsxFileName = \"C:\\\\Spring Boot\\\\workspacebranch\\\\flirdog\\\\src\\\\main\\\\webapp\\\\src\\\\components\\\\somoim\\\\detail\\\\ImageDetail.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Button, Carousel, Container, Form, InputGroup, Modal } from 'react-bootstrap';\nimport { UserContext } from '../../../contexts/UserContext';\nimport ImageModify from './ImageModify';\nimport ImageReply from './ImageReply';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ImageDetail = ({\n  show,\n  onClose,\n  selectedPhotoInfo,\n  somoimId,\n  isAdmin\n}) => {\n  _s();\n  console.log('Selected Photo Info:', selectedPhotoInfo);\n  console.log('selectedPhotoInfo.user.id', selectedPhotoInfo.user.id);\n  const [activeIndex, setActiveIndex] = useState(0); // 이미지 캐러셀 구현\n  const [maxHeight, setMaxHeight] = useState(null); // 캐러셀 크기 고정 구현\n  const [hitCount, setHitCount] = useState(selectedPhotoInfo ? selectedPhotoInfo.hit : 0); // 조회수 상태 추가\n  const [isLiked, setIsLiked] = useState(false); // 좋아요 구현\n  const [likedCount, setLikeCount] = useState(); // 좋아요 개수\n  const [comments, setComments] = useState([{}]); // 댓글 목록 상태 변수\n\n  const [isModifyMode, setIsModifyMode] = useState(false); // 수정 모드 추가\n  const [modifiedPhotoInfo, setModifiedPhotoInfo] = useState(null); // 수정할 이미지 정보 추가\n\n  const {\n    user\n  } = useContext(UserContext); // 유저 컨텍스트\n  console.log('이미지디테일 user : ', user.id);\n  // 선택된 이미지 게시글 정보\n  const {\n    createdAt,\n    modifiedAt,\n    id,\n    photoTitle,\n    photoContent,\n    photoLink,\n    photoLike,\n    hit,\n    somoimPhoto,\n    somoim\n  } = selectedPhotoInfo;\n\n  // console.log('사진첩 디테일 somoimId : ', somoim.id)\n\n  useEffect(() => {\n    console.log('ImageDetail - Selected Photo Info:', selectedPhotoInfo);\n    console.log('ImageDetail - 해당 게시글의 댓글 목록 정보 :', comments);\n  }, [selectedPhotoInfo, comments, comments.user]);\n\n  //조회수 계산\n  useEffect(() => {\n    // 컴포넌트가 처음 렌더링될 때는 updateHitCount를 호출하지 않습니다.\n    if (selectedPhotoInfo && show) {\n      updateHitCount();\n    }\n  }, [show, selectedPhotoInfo]);\n\n  // 해당 글의 가장 큰 이미지를 기준으로 모달창 높이 계산\n  useEffect(() => {\n    // 이미지의 최대 높이 계산\n    const calculateMaxHeight = () => {\n      const imageElements = document.querySelectorAll('.carousel-inner img');\n      let maxImageHeight = 0;\n      imageElements.forEach(img => {\n        maxImageHeight = Math.max(maxImageHeight, img.clientHeight);\n      });\n      setMaxHeight(maxImageHeight);\n    };\n    calculateMaxHeight();\n\n    // 창 크기가 변경될 때마다 최대 높이 다시 계산\n    const handleResize = () => {\n      calculateMaxHeight();\n    };\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [show]);\n  useEffect(() => {\n    // 좋아요 여부 요청\n    const LikeStatus = async () => {\n      try {\n        const response =\n        //await axios.get(`/somoim/somoimPhotoLikeStatus?userId=${user.id}&photoId=${id}`);\n        await axios.post(`/somoim/somoimPhotoLikeStatus`, {\n          userId: user.id,\n          photoId: id\n        });\n        setIsLiked(response.data.isLiked);\n        console.log('사진첩 좋아요 등록 여부 확인 : ', response.data.isLiked);\n      } catch (error) {\n        console.error('Error fetching like status:', error);\n      }\n    };\n    LikeStatus();\n  }, [id, user]);\n  useEffect(() => {\n    // 좋아요 받은 개수 요청\n    const ListCount = async () => {\n      try {\n        const res = await axios.get(`/somoim/somoimPhotoLikeCount?photoId=${id}`);\n        setLikeCount(res.data);\n        console.log('해당 게시글이 받은 좋와요 개수 : ', res.data);\n      } catch (error) {\n        console.error('좋아요 개수 조회 에러', error);\n      }\n    };\n    ListCount();\n  }, [id, isLiked]);\n\n  // 좋아요 등록 및 취소\n  const handleLikeToggle = async () => {\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: {\n          userId: user.id,\n          photoId: id\n        }\n      };\n      if (isLiked) {\n        // 좋아요 취소\n        await axios.delete('/somoim/somoimPhotoLikes', config).then(res => console.log('좋아요 취소 확인 : ', res.data)).catch(e => console.log(e));\n      } else {\n        // 좋아요 등록\n        await axios.post('/somoim/somoimPhotoLikes', {\n          userId: user.id,\n          photoId: selectedPhotoInfo.id\n        }).then(res => console.log('좋아요 등록 확인 : ', res.data)).catch(e => console.log(e));\n      }\n      setIsLiked(!isLiked);\n    } catch (error) {\n      console.error('Error toggling like:', error);\n    }\n  };\n\n  // 소모임 번호와 유저 권한 출력\n  useEffect(() => {\n    console.log('사진첩 디테일 somoimId : ', somoimId);\n    console.log('사진첩 디테일 isAdmin : ', isAdmin);\n    console.log('사진첩 디테일 photoId : ', id);\n  }, [isAdmin, somoimId, id]);\n  if (!selectedPhotoInfo) {\n    // 선택된 이미지 정보가 없을 경우 모달을 렌더링하지 않음\n    return null;\n  }\n\n  // 조회수 계산 axios\n  const updateHitCount = async () => {\n    try {\n      // ?id=${id}\n      const response = await axios.post(`/somoim/somoimPhotoCount?id=${id}`);\n      setHitCount(response.data.hit);\n    } catch (error) {\n      console.error('Failed to update hit count:', error);\n    }\n  };\n  const photoArray = somoimPhoto.replace(/\"/g, '').split(',');\n  const handleSelect = (selectedIndex, e) => {\n    setActiveIndex(selectedIndex);\n  };\n\n  // 수정 버튼 클릭 시 호출\n  const handleModifyButtonClick = selectedPhotoInfo => {\n    setModifiedPhotoInfo(selectedPhotoInfo);\n    setIsModifyMode(true);\n  };\n  const handleClose = () => {\n    setModifiedPhotoInfo(null);\n    setIsModifyMode(false);\n  };\n\n  // 글삭제\n  const onDeletePhoto = async () => {\n    const confirm = window.confirm('정말로 삭제하시겠습니까?');\n    if (confirm) {\n      if (isAdmin !== 0 && isAdmin !== 1) {\n        alert('삭제 권한이 없습니다.');\n      } else {\n        // await axios.delete('/somoim/somoimPhotoDelete', {\n        //         data: {\n        //             id: id,\n        //             userId: user.id,\n        //             somoimId: somoim.id\n        //         }\n        //     })\n        await axios.delete(`/somoim/somoimPhotoDelete?id=${id}&userId=${user.id}&somoimId=${somoim.id}`).then(res => {\n          console.log('삭제 응답:', res);\n          alert('해당 게시글이 삭제되었습니다.');\n          onClose();\n          window.location.reload();\n        }).catch(error => {\n          console.error('삭제시 에러', error);\n        });\n      } //isAdmin if문\n    } //confirm if문\n  };\n\n  // 댓글 등록 콜백 함수\n  // const onSubmitComment = (comment) => {\n  //     // 서버에 댓글 등록 요청 등의 로직 수행\n  //     // 성공적으로 등록되면 서버에서 반환한 댓글 정보를 comments 상태에 추가\n  //     const newComment = {\n  //     id: comments.length + 1, // 적절한 방식으로 댓글 id 생성\n  //     content: comment,\n  //     // 추가적인 댓글 정보 필드 추가 가능\n  //     };\n\n  //     setComments([...comments, newComment]);\n  // };\n\n  // 댓글 목록 전달받기\n  const updateComments = newComments => {\n    const filteredComments = newComments.filter(comment => comment.somoimPhoto.id === selectedPhotoInfo.id).map((comment, index) => ({\n      ...comment,\n      sequence: index + 1\n    }));\n\n    // sequence만 뒤집기\n    const reversedComments = filteredComments.map((comment, index) => ({\n      ...comment,\n      sequence: filteredComments.length - index // 역순으로 변경된 순서를 적용\n    }));\n    setComments(reversedComments);\n  };\n\n  // 댓글 삭제\n  const onReplyDeleteBtn = selectedReply => {\n    console.log('selectedReply', selectedReply);\n    if (window.confirm('정말 삭제하시겠습니까?')) {\n      axios.delete(`/somoim/photoReplyDelete?commentId=${selectedReply.id}&userId=${user.id}`).then(response => {\n        console.log('댓글 삭제 응답:', response);\n        alert('해당 댓글이 삭제되었습니다.');\n\n        // 새로운 배열을 생성하여 삭제된 댓글을 제외한 댓글 목록을 만듭니다.\n        const updatedComments = comments.filter(comment => comment.id !== selectedReply.id);\n\n        // 새로운 배열을 상태로 설정합니다.\n        setComments(updatedComments);\n      }).catch(error => {\n        console.error('댓글 삭제 에러:', error);\n      });\n    }\n  };\n\n  // 게시글 날짜 형식 변환\n  function formatDate(dateString) {\n    const options = {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit'\n    };\n    const formattedDate = new Date(dateString).toLocaleDateString('ko-KR', options).replace('.', '년').replace('.', '월').replace('.', '일').replace(' ', ' ').replace(/(\\d+:\\d+:\\d+)/, '$1');\n    return formattedDate;\n  }\n\n  // 댓글 날짜 형식 변환\n  function ReplyDate(dateString) {\n    const options = {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit'\n    };\n    const formattedDate = new Date(dateString).toLocaleDateString('ko-KR', options).replace('.', '년').replace('.', '월').replace('.', '일').replace(' ', ' ').replace(/(\\d+:\\d+:\\d+)/, '$1');\n    return formattedDate;\n  }\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    className: \"carousel-container\",\n    show: show,\n    onHide: onClose,\n    size: \"lg\",\n    children: isModifyMode ? /*#__PURE__*/_jsxDEV(ImageModify, {\n      onClose: handleClose,\n      modifiedPhotoInfo: modifiedPhotoInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: '1px solid red'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        style: {\n          padding: '0.8rem',\n          backgroundColor: 'pink',\n          color: 'white'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            width: '95%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: [\"\\uC81C\\uBAA9 : \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: photoTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: 'auto'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLikeToggle,\n              style: {\n                marginLeft: 'auto',\n                marginRight: '1rem',\n                backgroundColor: 'pink'\n              },\n              children: [isLiked ? '❤️' : '🤍', likedCount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 29\n            }, this), \"\\uC870\\uD68C\\uC218 : \", hitCount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: \"d-flex justify-content-center m-5\",\n        style: {\n          height: maxHeight ? maxHeight : '50%',\n          minHeight: '200px',\n          overflow: 'hidden',\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"style\", {\n          children: `\n                            .carousel-indicators {\n                                transform: translateY(30px);\n                            }\n                        `\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-8\",\n          style: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            maxHeight: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(Carousel, {\n            \"data-bs-theme\": \"dark\",\n            activeIndex: activeIndex,\n            onSelect: handleSelect,\n            interval: null,\n            style: {\n              width: '100%',\n              textAlign: 'center',\n              maxHeight: '100%'\n            },\n            children: photoArray.map((photo, index) => /*#__PURE__*/_jsxDEV(Carousel.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `https://kr.object.ncloudstorage.com/bitcamp-edu-bucket-112/${photo}`,\n                alt: `somoimPhoto-${index}`,\n                style: {\n                  width: '50%',\n                  marginBottom: '10px',\n                  maxHeight: '100%'\n                }\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 33\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-4\",\n          style: {\n            maxHeight: '100%',\n            overflowY: 'auto'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            style: {\n              lineHeight: '2.5'\n            },\n            children: \"\\uB0B4\\uC6A9 :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 75\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              whiteSpace: 'pre-line'\n            },\n            children: photoContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          marginRight: '1rem',\n          marginLeft: '1rem',\n          marginBottom: '0.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginRight: 'auto'\n          },\n          children: [\"\\u203B \\uC791\\uC131\\uC790: \", selectedPhotoInfo.user.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 21\n        }, this), modifiedAt ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginLeft: 'auto'\n          },\n          children: [\"(\\uC218\\uC815\\uC77C : \", formatDate(modifiedAt), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginLeft: 'auto'\n          },\n          children: [\"(\\uC791\\uC131\\uC77C : \", formatDate(createdAt), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ImageReply, {\n        selectedPhotoInfo: selectedPhotoInfo,\n        onUpdateComments: updateComments\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 17\n      }, this), comments.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '20px',\n          marginBottom: '10px',\n          color: 'gray'\n        },\n        children: \"\\uC544\\uC9C1 \\uB313\\uAE00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: comments.map((item, index) => {\n          var _comments$index, _comments$index$user;\n          return /*#__PURE__*/_jsxDEV(Container, {\n            className: \"py-3 px-4\",\n            style: {\n              borderBottom: '1px solid pink',\n              cursor: 'pointer',\n              transition: 'background-color 0.3s'\n            },\n            onMouseOver: e => {\n              e.currentTarget.style.backgroundColor = '#F0E6ED';\n            },\n            onMouseOut: e => {\n              e.currentTarget.style.backgroundColor = '';\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'left',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-1\",\n                style: {\n                  textAlign: 'center'\n                },\n                children: item.sequence\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-7 px-4\",\n                style: {\n                  overflowWrap: 'break-word'\n                },\n                children: item.comment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-4\",\n                style: {},\n                children: [item.modifiedAt ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  style: {\n                    marginBottom: '0.5rem'\n                  },\n                  children: ReplyDate(item.modifiedAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 49\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  style: {\n                    marginBottom: '0.5rem'\n                  },\n                  children: ReplyDate(item.createdAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  style: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      alignSelf: 'flex-start'\n                    },\n                    children: [\"\\uC791\\uC131\\uC790: \", item.user ? item.user.name : '로딩중...']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 395,\n                    columnNumber: 49\n                  }, this), (isAdmin === 1 || user.id && ((_comments$index = comments[index]) === null || _comments$index === void 0 ? void 0 : (_comments$index$user = _comments$index.user) === null || _comments$index$user === void 0 ? void 0 : _comments$index$user.id) === user.id) && /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"danger\",\n                    size: \"sm\",\n                    onClick: () => onReplyDeleteBtn(comments[index]),\n                    children: \"\\uC0AD\\uC81C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 398,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 37\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          backgroundColor: 'pink',\n          color: 'white'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\uB9C1\\uD06C : \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: photoLink,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: photoLink\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginRight: '0.5rem',\n            gap: '2'\n          },\n          children: isAdmin === 1 || (selectedPhotoInfo.user && selectedPhotoInfo.user.id) === (user === null || user === void 0 ? void 0 : user.id) && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"danger\",\n              size: \"sm\",\n              onClick: () => handleModifyButtonClick(selectedPhotoInfo),\n              children: \"\\uC218\\uC815\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"danger\",\n              size: \"sm\",\n              onClick: onDeletePhoto,\n              style: {\n                marginLeft: '0.7rem'\n              },\n              children: \"\\uC0AD\\uC81C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 9\n  }, this);\n};\n_s(ImageDetail, \"HeYXTG7SiWPDbGF4vz2r9NWpkb8=\");\n_c = ImageDetail;\nexport default ImageDetail;\nvar _c;\n$RefreshReg$(_c, \"ImageDetail\");","map":{"version":3,"names":["axios","React","useContext","useEffect","useState","Button","Carousel","Container","Form","InputGroup","Modal","UserContext","ImageModify","ImageReply","jsxDEV","_jsxDEV","Fragment","_Fragment","ImageDetail","show","onClose","selectedPhotoInfo","somoimId","isAdmin","_s","console","log","user","id","activeIndex","setActiveIndex","maxHeight","setMaxHeight","hitCount","setHitCount","hit","isLiked","setIsLiked","likedCount","setLikeCount","comments","setComments","isModifyMode","setIsModifyMode","modifiedPhotoInfo","setModifiedPhotoInfo","createdAt","modifiedAt","photoTitle","photoContent","photoLink","photoLike","somoimPhoto","somoim","updateHitCount","calculateMaxHeight","imageElements","document","querySelectorAll","maxImageHeight","forEach","img","Math","max","clientHeight","handleResize","window","addEventListener","removeEventListener","LikeStatus","response","post","userId","photoId","data","error","ListCount","res","get","handleLikeToggle","config","headers","delete","then","catch","e","photoArray","replace","split","handleSelect","selectedIndex","handleModifyButtonClick","handleClose","onDeletePhoto","confirm","alert","location","reload","updateComments","newComments","filteredComments","filter","comment","map","index","sequence","reversedComments","length","onReplyDeleteBtn","selectedReply","updatedComments","formatDate","dateString","options","year","month","day","hour","minute","second","formattedDate","Date","toLocaleDateString","ReplyDate","className","onHide","size","children","fileName","_jsxFileName","lineNumber","columnNumber","style","border","Header","closeButton","padding","backgroundColor","color","display","justifyContent","alignItems","width","Title","marginLeft","onClick","marginRight","Body","height","minHeight","overflow","flexDirection","flexWrap","onSelect","interval","textAlign","photo","Item","src","alt","marginBottom","overflowY","lineHeight","whiteSpace","name","onUpdateComments","item","_comments$index","_comments$index$user","borderBottom","cursor","transition","onMouseOver","currentTarget","onMouseOut","overflowWrap","alignSelf","variant","Footer","href","target","rel","gap","_c","$RefreshReg$"],"sources":["C:/Spring Boot/workspacebranch/flirdog/src/main/webapp/src/components/somoim/detail/ImageDetail.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { Button, Carousel, Container, Form, InputGroup, Modal } from 'react-bootstrap';\r\nimport { UserContext } from '../../../contexts/UserContext';\r\nimport ImageModify from './ImageModify';\r\nimport ImageReply from './ImageReply';\r\n\r\nconst ImageDetail = ({ show, onClose, selectedPhotoInfo, somoimId, isAdmin }) => {\r\n    console.log('Selected Photo Info:', selectedPhotoInfo);\r\n    console.log('selectedPhotoInfo.user.id', selectedPhotoInfo.user.id)\r\n    \r\n    const [activeIndex, setActiveIndex] = useState(0); // 이미지 캐러셀 구현\r\n    const [maxHeight, setMaxHeight] = useState(null); // 캐러셀 크기 고정 구현\r\n    const [hitCount, setHitCount] = useState(selectedPhotoInfo ? selectedPhotoInfo.hit : 0); // 조회수 상태 추가\r\n    const [isLiked, setIsLiked] = useState(false); // 좋아요 구현\r\n    const [likedCount, setLikeCount] = useState() // 좋아요 개수\r\n    const [comments, setComments] = useState([{}]); // 댓글 목록 상태 변수\r\n\r\n    const [isModifyMode, setIsModifyMode] = useState(false); // 수정 모드 추가\r\n    const [modifiedPhotoInfo, setModifiedPhotoInfo] = useState(null); // 수정할 이미지 정보 추가\r\n\r\n    const { user } = useContext(UserContext); // 유저 컨텍스트\r\n    console.log('이미지디테일 user : ', user.id)\r\n     // 선택된 이미지 게시글 정보\r\n     const { createdAt, modifiedAt, id, photoTitle, photoContent, \r\n        photoLink, photoLike, hit, somoimPhoto, somoim } = selectedPhotoInfo;\r\n\r\n    // console.log('사진첩 디테일 somoimId : ', somoim.id)\r\n    \r\n    useEffect(() => {\r\n        console.log('ImageDetail - Selected Photo Info:', selectedPhotoInfo);\r\n        console.log('ImageDetail - 해당 게시글의 댓글 목록 정보 :', comments);\r\n      }, [selectedPhotoInfo, comments, comments.user]);\r\n\r\n    //조회수 계산\r\n    useEffect(() => {\r\n        // 컴포넌트가 처음 렌더링될 때는 updateHitCount를 호출하지 않습니다.\r\n        if (selectedPhotoInfo && show) {\r\n            updateHitCount();\r\n        }\r\n    }, [show, selectedPhotoInfo]);\r\n\r\n    // 해당 글의 가장 큰 이미지를 기준으로 모달창 높이 계산\r\n    useEffect(() => {\r\n      // 이미지의 최대 높이 계산\r\n      const calculateMaxHeight = () => {\r\n        const imageElements = document.querySelectorAll('.carousel-inner img');\r\n        let maxImageHeight = 0;\r\n  \r\n        imageElements.forEach((img) => {\r\n          maxImageHeight = Math.max(maxImageHeight, img.clientHeight);\r\n        });\r\n  \r\n        setMaxHeight(maxImageHeight);\r\n      };\r\n  \r\n      calculateMaxHeight();\r\n  \r\n      // 창 크기가 변경될 때마다 최대 높이 다시 계산\r\n      const handleResize = () => {\r\n        calculateMaxHeight();\r\n      };\r\n  \r\n      window.addEventListener('resize', handleResize);\r\n  \r\n      return () => {\r\n        window.removeEventListener('resize', handleResize);\r\n      };\r\n    }, [show]);\r\n\r\n    \r\n    useEffect(() => {\r\n        // 좋아요 여부 요청\r\n        const LikeStatus = async () => {\r\n          try {\r\n            const response = \r\n                //await axios.get(`/somoim/somoimPhotoLikeStatus?userId=${user.id}&photoId=${id}`);\r\n                await axios.post(`/somoim/somoimPhotoLikeStatus`, {\r\n                    userId: user.id,\r\n                    photoId: id\r\n                  });\r\n            setIsLiked(response.data.isLiked);\r\n            console.log('사진첩 좋아요 등록 여부 확인 : ', response.data.isLiked)\r\n          } catch (error) {\r\n            console.error('Error fetching like status:', error);\r\n          }\r\n        };\r\n\r\n        LikeStatus();\r\n      }, [id, user]);\r\n\r\n    useEffect(() => {\r\n        // 좋아요 받은 개수 요청\r\n        const ListCount = async () => {\r\n            try {\r\n                const res = await axios.get(`/somoim/somoimPhotoLikeCount?photoId=${id}`)\r\n                setLikeCount(res.data);\r\n                console.log('해당 게시글이 받은 좋와요 개수 : ', res.data)\r\n            } catch(error) {\r\n                console.error('좋아요 개수 조회 에러', error)\r\n            }\r\n        }\r\n\r\n        ListCount();\r\n    }, [id, isLiked]);\r\n    \r\n    // 좋아요 등록 및 취소\r\n    const handleLikeToggle = async () => {\r\n        try {\r\n            const config = {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                data: {\r\n                    userId: user.id,\r\n                    photoId: id,\r\n                },\r\n            };\r\n    \r\n            if (isLiked) {\r\n                // 좋아요 취소\r\n                await axios.delete('/somoim/somoimPhotoLikes', config)\r\n                    .then(res => \r\n                        console.log('좋아요 취소 확인 : ', res.data),\r\n                        )\r\n                    .catch(e => console.log(e));\r\n            } else {\r\n                // 좋아요 등록\r\n                await axios.post('/somoim/somoimPhotoLikes', { \r\n                    userId: user.id,\r\n                    photoId: selectedPhotoInfo.id\r\n                }).then(res => console.log('좋아요 등록 확인 : ', res.data))\r\n                  .catch(e => console.log(e));\r\n            }\r\n    \r\n            setIsLiked(!isLiked);\r\n        } catch (error) {\r\n            console.error('Error toggling like:', error);\r\n        }\r\n    };\r\n\r\n    // 소모임 번호와 유저 권한 출력\r\n    useEffect(() => {\r\n        console.log('사진첩 디테일 somoimId : ', somoimId)\r\n        console.log('사진첩 디테일 isAdmin : ', isAdmin)\r\n        console.log('사진첩 디테일 photoId : ', id)\r\n    },[isAdmin, somoimId, id])\r\n\r\n    if (!selectedPhotoInfo) {\r\n        // 선택된 이미지 정보가 없을 경우 모달을 렌더링하지 않음\r\n        return null;\r\n    }\r\n    \r\n    // 조회수 계산 axios\r\n    const updateHitCount = async () => {\r\n        try { // ?id=${id}\r\n            const response = await axios\r\n                    .post(`/somoim/somoimPhotoCount?id=${id}`);\r\n            setHitCount(response.data.hit);\r\n        } catch (error) {\r\n            console.error('Failed to update hit count:', error);\r\n        }\r\n    };\r\n\r\n    const photoArray = somoimPhoto.replace(/\"/g, '').split(',');\r\n\r\n    const handleSelect = (selectedIndex, e) => {\r\n        setActiveIndex(selectedIndex);\r\n    };\r\n\r\n    // 수정 버튼 클릭 시 호출\r\n    const handleModifyButtonClick = (selectedPhotoInfo) => {\r\n        setModifiedPhotoInfo(selectedPhotoInfo);\r\n        setIsModifyMode(true);\r\n      };\r\n    \r\n    const handleClose = () => {\r\n        setModifiedPhotoInfo(null);\r\n        setIsModifyMode(false);\r\n    };\r\n\r\n    // 글삭제\r\n    const onDeletePhoto = async () => {\r\n        const confirm = window.confirm('정말로 삭제하시겠습니까?')\r\n        if(confirm) {\r\n            if(isAdmin !== 0 && isAdmin !== 1) {\r\n                alert('삭제 권한이 없습니다.')\r\n            } else {\r\n                // await axios.delete('/somoim/somoimPhotoDelete', {\r\n                //         data: {\r\n                //             id: id,\r\n                //             userId: user.id,\r\n                //             somoimId: somoim.id\r\n                //         }\r\n                //     })\r\n                await axios.delete(`/somoim/somoimPhotoDelete?id=${id}&userId=${user.id}&somoimId=${somoim.id}`)\r\n                    .then((res) => {\r\n                        console.log('삭제 응답:', res);\r\n                        alert('해당 게시글이 삭제되었습니다.')\r\n                        onClose();\r\n                        window.location.reload();\r\n                    })\r\n                    .catch((error) => {\r\n                        console.error('삭제시 에러', error);\r\n                    });\r\n            }//isAdmin if문\r\n        }//confirm if문\r\n    }\r\n\r\n    // 댓글 등록 콜백 함수\r\n    // const onSubmitComment = (comment) => {\r\n    //     // 서버에 댓글 등록 요청 등의 로직 수행\r\n    //     // 성공적으로 등록되면 서버에서 반환한 댓글 정보를 comments 상태에 추가\r\n    //     const newComment = {\r\n    //     id: comments.length + 1, // 적절한 방식으로 댓글 id 생성\r\n    //     content: comment,\r\n    //     // 추가적인 댓글 정보 필드 추가 가능\r\n    //     };\r\n\r\n    //     setComments([...comments, newComment]);\r\n    // };\r\n\r\n\r\n    // 댓글 목록 전달받기\r\n    const updateComments = (newComments) => {\r\n        const filteredComments = newComments\r\n            .filter(comment => comment.somoimPhoto.id === selectedPhotoInfo.id)\r\n            .map((comment, index) => ({ ...comment, sequence: index + 1 }));\r\n    \r\n        // sequence만 뒤집기\r\n        const reversedComments = filteredComments.map((comment, index) => ({\r\n            ...comment,\r\n            sequence: filteredComments.length - index, // 역순으로 변경된 순서를 적용\r\n        }));\r\n    \r\n        setComments(reversedComments);\r\n    };\r\n\r\n\r\n    // 댓글 삭제\r\n    const onReplyDeleteBtn = (selectedReply) => {\r\n        console.log('selectedReply', selectedReply)\r\n        if(window.confirm('정말 삭제하시겠습니까?')) {\r\n            axios.delete(`/somoim/photoReplyDelete?commentId=${selectedReply.id}&userId=${user.id}`)\r\n              .then((response) => {\r\n                console.log('댓글 삭제 응답:', response);\r\n                alert('해당 댓글이 삭제되었습니다.')\r\n\r\n                // 새로운 배열을 생성하여 삭제된 댓글을 제외한 댓글 목록을 만듭니다.\r\n                const updatedComments = comments.filter(comment => comment.id !== selectedReply.id);\r\n                \r\n                // 새로운 배열을 상태로 설정합니다.\r\n                setComments(updatedComments);\r\n              })\r\n              .catch((error) => {\r\n                console.error('댓글 삭제 에러:', error);\r\n              });\r\n        }\r\n    };\r\n\r\n    // 게시글 날짜 형식 변환\r\n    function formatDate(dateString) {\r\n        const options = {\r\n          year: 'numeric',\r\n          month: '2-digit',\r\n          day: '2-digit',\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          second: '2-digit',\r\n        };\r\n      \r\n        const formattedDate = new Date(dateString).toLocaleDateString('ko-KR', options)\r\n          .replace('.', '년')\r\n          .replace('.', '월')\r\n          .replace('.', '일')\r\n          .replace(' ', ' ')\r\n          .replace(/(\\d+:\\d+:\\d+)/, '$1');\r\n          \r\n        return formattedDate;\r\n    }\r\n\r\n    // 댓글 날짜 형식 변환\r\n    function ReplyDate(dateString) {\r\n        const options = {\r\n          year: 'numeric',\r\n          month: '2-digit',\r\n          day: '2-digit',\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          second: '2-digit',\r\n        };\r\n      \r\n        const formattedDate = new Date(dateString).toLocaleDateString('ko-KR', options)\r\n          .replace('.', '년')\r\n          .replace('.', '월')\r\n          .replace('.', '일')\r\n          .replace(' ', ' ')\r\n          .replace(/(\\d+:\\d+:\\d+)/, '$1');\r\n          \r\n        return formattedDate;\r\n    }\r\n\r\n    return (\r\n        <Modal className=\"carousel-container\" show={show} onHide={onClose} size=\"lg\">\r\n            {isModifyMode ? (\r\n                <ImageModify onClose={handleClose} modifiedPhotoInfo={modifiedPhotoInfo} />\r\n            ) : (\r\n            <div style={{border: '1px solid red'}}>\r\n                <Modal.Header closeButton style={{ padding: '0.8rem', backgroundColor: 'pink', color: 'white' }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '95%' }}>\r\n                        <Modal.Title>\r\n                        제목 : <strong>{photoTitle}</strong>\r\n                        </Modal.Title>        \r\n                        <span style={{ marginLeft: 'auto' }}>\r\n                            <button \r\n                                onClick={ handleLikeToggle } \r\n                                style={{ marginLeft: 'auto', marginRight:'1rem', backgroundColor: 'pink' }}\r\n                            >\r\n                                { isLiked ? '❤️' : '🤍' }{ likedCount }\r\n                            </button>\r\n                            조회수 : {hitCount}</span>\r\n                    </div>\r\n                </Modal.Header>\r\n                <Modal.Body\r\n                className=\"d-flex justify-content-center m-5\"\r\n                style={{ height: maxHeight ? maxHeight : '50%', minHeight: '200px', overflow: 'hidden', display: 'flex', flexDirection: 'row' }}\r\n                >\r\n                    <style>\r\n                        {`\r\n                            .carousel-indicators {\r\n                                transform: translateY(30px);\r\n                            }\r\n                        `}\r\n                    </style>\r\n                    <div className=\"col-8\" style={{ display: 'flex', flexWrap: 'wrap', maxHeight: '100%' }}>\r\n                        <Carousel data-bs-theme=\"dark\"activeIndex={activeIndex} onSelect={handleSelect} interval={null} style={{ width: '100%', textAlign: 'center', maxHeight: '100%' }}>\r\n                            {photoArray.map((photo, index) => (\r\n                                <Carousel.Item key={index}>\r\n                                <img\r\n                                    key={index}\r\n                                    src={`https://kr.object.ncloudstorage.com/bitcamp-edu-bucket-112/${photo}`}\r\n                                    alt={`somoimPhoto-${index}`}\r\n                                    style={{ width: '50%', marginBottom: '10px', maxHeight: '100%' }}\r\n                                />\r\n                            </Carousel.Item>\r\n                        ))}\r\n                        </Carousel>\r\n                    </div>\r\n                    <div className=\"col-4\" style={{ maxHeight: '100%', overflowY: 'auto' }}>\r\n                        <strong style={{ lineHeight:'2.5' }}>내용 :</strong><br />\r\n                        <div style={{ whiteSpace: 'pre-line' }}>{photoContent}</div>\r\n                    </div>\r\n                </Modal.Body>\r\n                <div style={{ display: 'flex', marginRight: '1rem', marginLeft: '1rem', marginBottom: '0.5rem' }}>\r\n                    <div style={{ marginRight: 'auto' }}>※ 작성자: {selectedPhotoInfo.user.name}</div>\r\n                    {\r\n                    modifiedAt ? (\r\n                        <div style={{ marginLeft: 'auto' }}>\r\n                            (수정일 : {formatDate(modifiedAt)})</div>\r\n                    ) : (\r\n                        <div style={{ marginLeft: 'auto' }}>\r\n                            (작성일 : {formatDate(createdAt)})</div>\r\n                    )\r\n                }\r\n                </div>\r\n                <ImageReply selectedPhotoInfo={selectedPhotoInfo} onUpdateComments={updateComments} />\r\n                { comments.length === 0 ? (\r\n                    <div style={{ textAlign: 'center', padding: '20px', marginBottom: '10px', color: 'gray' }}>\r\n                        아직 댓글이 없습니다.\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        {\r\n                            comments.map((item, index) => { \r\n                                return (\r\n                                <Container className='py-3 px-4' \r\n                                        key={index}\r\n                                        style={{\r\n                                            borderBottom: '1px solid pink',\r\n                                            cursor: 'pointer', \r\n                                            transition: 'background-color 0.3s', \r\n                                        }}\r\n                                        onMouseOver={(e) => { e.currentTarget.style.backgroundColor = '#F0E6ED'; }}\r\n                                        onMouseOut={(e) => { e.currentTarget.style.backgroundColor = ''; }}\r\n                                    >\r\n                                    <div style={{ display: 'flex', justifyContent: 'left', alignItems: 'center' }}>\r\n                                        <div className='col-1' style={{ textAlign: 'center' }}>{item.sequence}</div>\r\n                                        <div className='col-7 px-4' style={{ overflowWrap: 'break-word' }}>{item.comment}</div>\r\n                                        <div className='col-4' style={{ }}>\r\n                                            {item.modifiedAt ? \r\n                                                <div className='col' style={{ marginBottom: '0.5rem' }}>{ReplyDate(item.modifiedAt)}</div>  : \r\n                                                <div className='col' style={{ marginBottom: '0.5rem' }}>{ReplyDate(item.createdAt)}</div>\r\n                                            }\r\n                                            <div className='col' style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>\r\n                                                <div style={{ alignSelf: 'flex-start' }}>작성자: {item.user ? item.user.name : '로딩중...'}</div>\r\n                                                {\r\n                                                    ( isAdmin === 1 || (user.id && comments[index]?.user?.id === user.id)) && (\r\n                                                        <Button variant='danger' size='sm' onClick={() => onReplyDeleteBtn(comments[index])}>\r\n                                                            삭제\r\n                                                        </Button>\r\n                                                    )\r\n                                                }\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </Container>\r\n                            )})\r\n                        }\r\n                    </>\r\n                )}\r\n                <Modal.Footer style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', backgroundColor: 'pink', color: 'white' }}>\r\n                    <div>\r\n                        링크 : <a href={photoLink} target=\"_blank\" rel=\"noopener noreferrer\">{photoLink}</a>\r\n                    </div>\r\n                    <div style={{ marginRight: '0.5rem', gap: '2' }}>\r\n                    {isAdmin === 1 || ((selectedPhotoInfo.user && selectedPhotoInfo.user.id) === user?.id) && (\r\n                        <>\r\n                            <Button variant=\"danger\" size=\"sm\" onClick={() => handleModifyButtonClick(selectedPhotoInfo)}>수정</Button>\r\n                            <Button variant=\"danger\" size=\"sm\" onClick={onDeletePhoto} style={{ marginLeft: '0.7rem' }}>삭제</Button>\r\n                        </>\r\n                    )}\r\n                    </div>\r\n                </Modal.Footer>\r\n            </div>\r\n            )}\r\n        </Modal>\r\n      );\r\n    };\r\n\r\nexport default ImageDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}