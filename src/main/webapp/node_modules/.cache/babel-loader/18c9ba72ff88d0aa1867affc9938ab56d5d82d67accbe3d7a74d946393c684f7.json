{"ast":null,"code":"var _jsxFileName = \"C:\\\\Spring Boot\\\\workspacebranch\\\\flirdog\\\\src\\\\main\\\\webapp\\\\src\\\\components\\\\message\\\\ImageAndTextInput.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Button, FormControl, Modal } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageAndTextInput = ({\n  messageInput,\n  onImageUpload,\n  onTextChange,\n  onSendMessage\n}) => {\n  _s();\n  const [showModal, setShowModal] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(null);\n  const fileInputRef = useRef(null);\n  const handleFileSelect = event => {\n    if (event.target.files && event.target.files.length > 0) {\n      const file = event.target.files[0];\n      setSelectedImage(file);\n      setShowModal(true);\n    }\n    event.target.value = '';\n  };\n  const handleDrop = event => {\n    event.preventDefault();\n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      setSelectedImage(file);\n      setShowModal(true);\n    }\n  };\n  const handleImageUpload = () => {\n    if (selectedImage) {\n      onImageUpload(selectedImage); // props로 받은 onImageUpload 함수를 호출\n      setShowModal(false); // 모달을 닫음\n    }\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n  useEffect(() => {\n    if (showModal === false) {\n      setSelectedImage(null);\n    }\n  }, [showModal]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onDragOver: e => e.preventDefault(),\n    onDrop: handleDrop,\n    style: {\n      width: '100%',\n      border: '1px solid #ccc',\n      padding: '10px',\n      backgroundColor: \"white\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(FormControl, {\n      as: \"textarea\" // FormControl을 textarea로 사용합니다.\n      ,\n      style: {\n        flexGrow: 1,\n        marginBottom: '10px'\n      },\n      value: messageInput,\n      placeholder: \"\\uBA54\\uC2DC\\uC9C0\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",\n      onChange: e => onTextChange(e.target.value),\n      onKeyPress: e => {\n        if (e.key === 'Enter' && !e.shiftKey) {\n          e.preventDefault();\n          onSendMessage();\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/image/message/clip.png\",\n        alt: \"Attach file\",\n        style: {\n          cursor: 'pointer',\n          width: '24px',\n          height: '24px'\n        },\n        onClick: () => {\n          var _fileInputRef$current;\n          return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: onSendMessage,\n        style: {\n          marginRight: '10px'\n        },\n        children: \"\\uC804\\uC1A1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleFileSelect,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onHide: handleCloseModal,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        style: {\n          backgroundColor: \"#F56084\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          style: {\n            fontWeight: \"bold\"\n          },\n          children: \"\\uC774\\uBBF8\\uC9C0 \\uC5C5\\uB85C\\uB4DC \\uD655\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: selectedImage && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: URL.createObjectURL(selectedImage),\n          alt: \"Preview\",\n          style: {\n            maxWidth: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleCloseModal,\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleImageUpload,\n          children: \"\\uC5C5\\uB85C\\uB4DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n_s(ImageAndTextInput, \"jQtjBb2APNn6PQ8utUB6suUGcCE=\");\n_c = ImageAndTextInput;\nexport default ImageAndTextInput;\nvar _c;\n$RefreshReg$(_c, \"ImageAndTextInput\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Button","FormControl","Modal","jsxDEV","_jsxDEV","ImageAndTextInput","messageInput","onImageUpload","onTextChange","onSendMessage","_s","showModal","setShowModal","selectedImage","setSelectedImage","fileInputRef","handleFileSelect","event","target","files","length","file","value","handleDrop","preventDefault","dataTransfer","handleImageUpload","handleCloseModal","current","onDragOver","e","onDrop","style","width","border","padding","backgroundColor","children","as","flexGrow","marginBottom","placeholder","onChange","onKeyPress","key","shiftKey","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","alignItems","src","alt","cursor","height","onClick","_fileInputRef$current","click","variant","marginRight","ref","type","accept","show","onHide","Header","closeButton","Title","fontWeight","Body","URL","createObjectURL","maxWidth","Footer","_c","$RefreshReg$"],"sources":["C:/Spring Boot/workspacebranch/flirdog/src/main/webapp/src/components/message/ImageAndTextInput.tsx"],"sourcesContent":["import React, {useState, useRef, useEffect} from 'react';\r\nimport { Button, FormControl, Modal } from 'react-bootstrap';\r\n\r\ntype ImageAndTextInputProps = {\r\n    messageInput: string;\r\n    onImageUpload: (imageFile: File) => void;\r\n    onTextChange: (text: string) => void;\r\n    onSendMessage: () => void;\r\n};\r\n\r\nconst ImageAndTextInput: React.FC<ImageAndTextInputProps> = ({ messageInput, onImageUpload, onTextChange, onSendMessage }) => {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [selectedImage, setSelectedImage] = useState<File | null>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (event.target.files && event.target.files.length > 0) {\r\n            const file = event.target.files[0];\r\n            setSelectedImage(file);\r\n            setShowModal(true);\r\n        }\r\n        event.target.value = '';\r\n    };\r\n\r\n    const handleDrop = (event: React.DragEvent<HTMLDivElement>) => {\r\n        event.preventDefault();\r\n        if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\r\n            const file = event.dataTransfer.files[0];\r\n            setSelectedImage(file);\r\n            setShowModal(true);\r\n        }\r\n    };\r\n\r\n    const handleImageUpload = () => {\r\n        if (selectedImage) {\r\n            onImageUpload(selectedImage); // props로 받은 onImageUpload 함수를 호출\r\n            setShowModal(false); // 모달을 닫음\r\n        }\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setShowModal(false);\r\n        if (fileInputRef.current) fileInputRef.current.value = '';\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(showModal === false) {\r\n            setSelectedImage(null);\r\n        }\r\n    }, [showModal]);\r\n\r\n    return (\r\n        <div\r\n            onDragOver={(e) => e.preventDefault()}\r\n            onDrop={handleDrop}\r\n            style={{ width: '100%', border: '1px solid #ccc', padding: '10px', backgroundColor: \"white\" }}\r\n        >\r\n            <FormControl\r\n                as=\"textarea\" // FormControl을 textarea로 사용합니다.\r\n                style={{ flexGrow: 1, marginBottom: '10px' }}\r\n                value={messageInput}\r\n                placeholder=\"메시지를 입력하세요\"\r\n                onChange={(e) => onTextChange(e.target.value)}\r\n                onKeyPress={(e) => {\r\n                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                        e.preventDefault();\r\n                        onSendMessage();\r\n                    }\r\n                }}\r\n            />\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <img\r\n                    src=\"/image/message/clip.png\"\r\n                    alt=\"Attach file\"\r\n                    style={{ cursor: 'pointer', width: '24px', height: '24px' }}\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                />\r\n                <Button\r\n                    variant=\"primary\"\r\n                    onClick={onSendMessage}\r\n                    style={{ marginRight: '10px' }}\r\n                >\r\n                    전송\r\n                </Button>\r\n                <input\r\n                    ref={fileInputRef}\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleFileSelect}\r\n                    style={{ display: 'none' }}\r\n                />\r\n            </div>\r\n            <Modal show={showModal} onHide={handleCloseModal}>\r\n                <Modal.Header closeButton style={{backgroundColor:\"#F56084\"}}>\r\n                    <Modal.Title style={{fontWeight:\"bold\"}}>이미지 업로드 확인</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {selectedImage && (\r\n                        <img\r\n                            src={URL.createObjectURL(selectedImage)}\r\n                            alt=\"Preview\"\r\n                            style={{ maxWidth: '100%' }}\r\n                        />\r\n                    )}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleCloseModal}>\r\n                        취소\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={handleImageUpload}>\r\n                        업로드\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImageAndTextInput;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}